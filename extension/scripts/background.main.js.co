(window.player) <- require [\moefm/player]
window.poke = ->
    me = @@callee
    if me._tout
        clearTimeout me._tout
        delete me._tout
        player.stop!
        return
    me._tout = setTimeout ->
        delete me._tout
        player.skip!
    , 1000

(request, sender, sendResponse)<- chrome.extension.onRequest.addListener
console.log @@
switch request.action
case 'eval'
    fn = eval('('+request.data+')')
    return (sendResponse fn? window)||{}
default
    sendResponse {}
